{"ast":null,"code":"var _jsxFileName = \"/Users/eddie/Documents/GitHub/quick-travis/src/App.js\";\nimport React, { useEffect, useState } from 'react';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Goal from './Card/Goal';\nimport AddGoal from './AddGoal';\nimport GoalGrid from './GoalGrid';\nimport firebase from './shared/firebase';\nimport ToggleButtons from './Toggle';\nimport Badge from '@material-ui/core/Badge';\nimport MailIcon from '@material-ui/icons/Mail';\nimport HomeIcon from '@material-ui/icons/Home';\nimport ArchiveIcon from '@material-ui/icons/Archive';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nconst db = firebase.database().ref();\nconst uiConfig = {\n  signInFlow: 'popup',\n  signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n};\nconst useStyles = makeStyles(theme => ({\n  title: {\n    flexGrow: 1\n  },\n  icons: {\n    margin: \"5px\",\n    color: \"white\"\n  }\n}));\n\nconst Welcome = ({\n  user,\n  invites,\n  setGridView\n}) => {\n  const classes = useStyles();\n  let count = 0;\n  Object.values(invites).map(goal => goal.confirmed ? null : count++);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    className: classes.title,\n    onClick: () => {\n      window.location.reload(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, \"Work2Gather\"), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => setGridView(\"ACTIVE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(HomeIcon, {\n    className: classes.icons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Invites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => setGridView(\"INVITES\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'left'\n    },\n    badgeContent: count,\n    color: \"secondary\",\n    className: classes.icons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MailIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Archive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => setGridView(\"ARCHIVE\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ArchiveIcon, {\n    className: classes.icons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    style: {\n      marginLeft: \"10px\",\n      float: \"center\",\n      marginRight: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"Welcome, \", user.displayName ? user.displayName.split(' ')[0] : \"\"), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: 21\n    },\n    color: \"inherit\",\n    onClick: () => {\n      setGridView(\"ACTIVE\");\n      firebase.auth().signOut();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, \"Log out\"))));\n};\n\nconst SignIn = () => /*#__PURE__*/React.createElement(StyledFirebaseAuth, {\n  uiConfig: uiConfig,\n  firebaseAuth: firebase.auth(),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 3\n  }\n});\n\nconst Banner = ({\n  user,\n  invites,\n  title,\n  setGridView\n}) => /*#__PURE__*/React.createElement(React.Fragment, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 3\n  }\n}, user ? /*#__PURE__*/React.createElement(Welcome, {\n  user: user,\n  invites: invites,\n  setGridView: setGridView,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 13\n  }\n}) : /*#__PURE__*/React.createElement(SignIn, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 82\n  }\n}));\n\nconst App = () => {\n  const [goalsJSON, setGoals] = useState({});\n  const [invites, setInvite] = useState({});\n  const [user, setUser] = useState({});\n  const [emailTouid, setEmailTouid] = useState({});\n  const [open, setOpen] = useState(false);\n  const [gridView, setGridView] = useState(\"ACTIVE\");\n  var goals = Object.values(goalsJSON);\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(setUser);\n  }, []);\n  useEffect(() => {\n    const handleData = snap => {\n      if (user) {\n        if (snap.val()) {\n          let re = /\\./gi;\n          let email = user.email.replace(re, ',');\n          db.child('emailTouid/' + email).set(user.uid);\n          setEmailTouid(snap.val().emailTouid);\n\n          if (!snap.val().users[user.uid]) {\n            db.child(\"users\").child(user.uid).child(\"name\").set(user.displayName);\n          }\n\n          if (snap.val().users[user.uid] && snap.val().users[user.uid].goals) {\n            let goals_arr = snap.val().users[user.uid].goals;\n            setGoals(Object.values(goals_arr).map(goal => snap.val().goals[goal]));\n          } else {\n            setGoals({});\n          }\n\n          if (snap.val().users[user.uid] && snap.val().users[user.uid].invites) {\n            let invites_arr = snap.val().users[user.uid].invites;\n            setInvite(Object.values(invites_arr).map(goal => snap.val().goals[goal]));\n          } else {\n            setInvite({});\n          }\n        }\n      } else {\n        setGoals({});\n        setEmailTouid({});\n      }\n    };\n\n    db.on('value', handleData, error => alert(error));\n    return () => {\n      db.off('value', handleData);\n    };\n  }, [user]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Banner, {\n    user: user,\n    invites: invites,\n    title: \"Work2Gather\",\n    setGridView: setGridView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }), user ? /*#__PURE__*/React.createElement(AddGoal, {\n    open: open,\n    user: user,\n    setOpen: setOpen,\n    emailTouid: emailTouid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }) : null, user ? /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"xl\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(GoalGrid, {\n    goals: goals,\n    invites: invites,\n    user: user,\n    gridView: gridView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }\n  })) : null);\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/eddie/Documents/GitHub/quick-travis/src/App.js"],"names":["React","useEffect","useState","StyledFirebaseAuth","makeStyles","Button","AppBar","Toolbar","Typography","Container","Goal","AddGoal","GoalGrid","firebase","ToggleButtons","Badge","MailIcon","HomeIcon","ArchiveIcon","IconButton","Tooltip","db","database","ref","uiConfig","signInFlow","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","callbacks","signInSuccessWithAuthResult","useStyles","theme","title","flexGrow","icons","margin","color","Welcome","user","invites","setGridView","classes","count","Object","values","map","goal","confirmed","window","location","reload","vertical","horizontal","marginLeft","float","marginRight","displayName","split","fontSize","signOut","SignIn","Banner","App","goalsJSON","setGoals","setInvite","setUser","emailTouid","setEmailTouid","open","setOpen","gridView","goals","onAuthStateChanged","handleData","snap","val","re","email","replace","child","set","uid","users","goals_arr","invites_arr","on","error","alert","off"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Goal from './Card/Goal'\nimport AddGoal from './AddGoal';\nimport GoalGrid from './GoalGrid';\nimport firebase from './shared/firebase'\nimport ToggleButtons from './Toggle'\nimport Badge from '@material-ui/core/Badge'; \nimport MailIcon from '@material-ui/icons/Mail'; \nimport HomeIcon from '@material-ui/icons/Home'; \nimport ArchiveIcon from '@material-ui/icons/Archive'; \nimport IconButton from '@material-ui/core/IconButton'; \nimport Tooltip from '@material-ui/core/Tooltip';\n\n\nconst db = firebase.database().ref();\n\nconst uiConfig = {\n  signInFlow: 'popup',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID\n  ],\n  callbacks: {\n    signInSuccessWithAuthResult: () => false\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  title: {\n    flexGrow: 1,\n  },\n  icons:{\n    margin:\"5px\",\n    color: \"white\"\n  }\n}));\n\nconst Welcome = ({ user, invites, setGridView}) => {\n  const classes = useStyles();\n  let count = 0;\n  Object.values(invites).map(goal=>goal.confirmed?null:count++);\n\n  return (\n    <React.Fragment>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h5\" className={classes.title} onClick={() => {window.location.reload(false)}}>\n            Work2Gather\n          </Typography>\n          <Tooltip title=\"Home\">\n            <IconButton onClick={() => setGridView(\"ACTIVE\")}>\n              <HomeIcon className={classes.icons} />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Invites\">\n            <IconButton onClick={() => setGridView(\"INVITES\")}>\n              <Badge \n                anchorOrigin={{\n                   vertical: 'top',\n                  horizontal: 'left',\n                }} \n                badgeContent={count} \n                color=\"secondary\"\n                className={classes.icons}>\n                <MailIcon />\n              </Badge>\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Archive\">\n            <IconButton  onClick={() => setGridView(\"ARCHIVE\")}>\n              <ArchiveIcon className={classes.icons}/>\n            </IconButton>\n          </Tooltip>\n          \n          <Typography variant=\"h6\" style={{ marginLeft:\"10px\", float: \"center\", marginRight: 30 }}>\n            Welcome, {user.displayName ? user.displayName.split(' ')[0] : \"\"}\n          </Typography>\n          <Button style={{ fontSize: 21 }} color=\"inherit\" onClick={() => { setGridView(\"ACTIVE\"); firebase.auth().signOut() }}>\n            Log out\n          </Button>\n        </Toolbar>\n      </AppBar>\n    </React.Fragment>\n  );\n};\n\nconst SignIn = () => (\n  <StyledFirebaseAuth\n    uiConfig={uiConfig}\n    firebaseAuth={firebase.auth()}\n  />\n);\n\nconst Banner = ({ user, invites, title, setGridView }) => (\n  <React.Fragment>\n    {user ? <Welcome user={user} invites={invites} setGridView={setGridView}/> : <SignIn />}\n  </React.Fragment>\n);\n\nconst App = () => {\n  const [goalsJSON, setGoals] = useState({});\n  const [invites, setInvite] = useState({});\n  const [user, setUser] = useState({});\n  const [emailTouid, setEmailTouid] = useState({});\n  const [open, setOpen] = useState(false);\n  const [gridView, setGridView] = useState(\"ACTIVE\");\n\n  var goals = Object.values(goalsJSON);\n\n  useEffect(() => {\n    firebase.auth().onAuthStateChanged(setUser);\n  }, []);\n\n  useEffect(() => {\n    const handleData = snap => {\n      if (user) {\n        if (snap.val()) {\n          let re = /\\./gi;\n          let email = user.email.replace(re, ',')\n          db.child('emailTouid/' + email).set(user.uid);\n          setEmailTouid(snap.val().emailTouid);\n          if (!snap.val().users[user.uid]) {\n            db.child(\"users\").child(user.uid).child(\"name\").set(user.displayName);\n          }\n          if (snap.val().users[user.uid] && snap.val().users[user.uid].goals) {\n            let goals_arr = snap.val().users[user.uid].goals;\n            setGoals(Object.values(goals_arr).map(goal => snap.val().goals[goal]));\n          }\n          else {\n            setGoals({});\n          }\n          if (snap.val().users[user.uid] && snap.val().users[user.uid].invites) {\n            let invites_arr = snap.val().users[user.uid].invites;\n            setInvite(Object.values(invites_arr).map(goal => snap.val().goals[goal]));\n          }\n          else {\n            setInvite({});\n          }\n        }\n      } else {\n        setGoals({});\n        setEmailTouid({});\n      }\n    };\n    db.on('value', handleData, error => alert(error));\n    return () => { db.off('value', handleData); };\n  }, [user]);\n\n  return (\n    <div>\n      <Banner user={user} invites={invites} title=\"Work2Gather\" setGridView={setGridView}>\n      </Banner>\n      <br></br>\n      {user ? <AddGoal open={open} user={user} setOpen={setOpen} emailTouid={emailTouid} /> : null}\n      {user ? <Container maxWidth=\"xl\">\n        <GoalGrid goals={goals} invites={invites} user={user} gridView={gridView}/>\n      </Container> : null}\n    </div>\n  );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}