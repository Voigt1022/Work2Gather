{"ast":null,"code":"import _slicedToArray from\"/Users/eddie/Documents/GitHub/quick-travis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{makeStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import ProgressGrid from\"./ProgressGrid\";import firebase from\"../shared/firebase\";import{AreaChart,Area,BarChart,Bar,LineChart,Label,ReferenceLine,Line,XAxis,YAxis,CartesianGrid,Tooltip,Legend}from'recharts';import ToggleButtonsView from'./ToggleView';var useStyles=makeStyles(function(theme){return{form:{display:'flex',flexDirection:'column',margin:'auto',width:'fit-content',align:'right'},yaxis:{padding:'10px',textAlign:'center'}};});export default function SeeMore(_ref){var goal=_ref.goal,buttonText=_ref.buttonText;var classes=useStyles();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),goalData=_useState2[0],setGoalData=_useState2[1];var _React$useState3=React.useState('BAR'),_React$useState4=_slicedToArray(_React$useState3,2),showView=_React$useState4[0],setShowView=_React$useState4[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),creatorName=_useState4[0],setCreatorName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),inviteeName=_useState6[0],setInviteeName=_useState6[1];var getDayOn=function getDayOn(){var startdate=new Date(goal[\"startDate\"]);var currentdate=new Date();var deltatime=currentdate.getTime()-startdate.getTime();var deltadays=Math.floor(deltatime/(1000*3600*24));return deltadays;};var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};useEffect(function(){var tempData=[];var users=Object.keys(goal[\"progress\"]);for(var j=0;j<goal[\"progress\"][users[0]].length;j++){var entry={name:j.toString(),uv:goal[\"progress\"][goal[\"groupMembers\"][\"creator\"]][j],pv:goal[\"progress\"][goal[\"groupMembers\"][\"invitee\"]][j]};tempData.push(entry);}setGoalData(tempData);},[goal]);useEffect(function(){var setGoalUserNames=function setGoalUserNames(snap){if(snap.val()){setCreatorName(snap.val()[goal[\"groupMembers\"][\"creator\"]][\"name\"].split(\" \")[0]);setInviteeName(snap.val()[goal[\"groupMembers\"][\"invitee\"]][\"name\"].split(\" \")[0]);}};var dbUsers=firebase.database().ref(\"users\");dbUsers.on(\"value\",setGoalUserNames,function(error){return alert(error);});return function(){dbUsers.off(\"value\",setGoalUserNames);};});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{size:\"medium\",variant:\"contained\",color:\"primary\",style:{width:\"150px\"},onClick:handleClickOpen},buttonText?buttonText:'See More')),/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(Dialog,{fullWidth:true,maxWidth:\"md\",open:open,onClose:handleClose,\"aria-labelledby\":\"max-width-dialog-title\",style:{overflow:\"scrollbar\"}},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{float:\"left\"}},/*#__PURE__*/React.createElement(DialogTitle,{id:\"max-width-dialog-title\"},goal.title)),/*#__PURE__*/React.createElement(\"div\",{style:{float:\"right\",margin:\"10px\"}},/*#__PURE__*/React.createElement(ToggleButtonsView,{showView:showView,setShowView:setShowView}))),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{float:'left'}},/*#__PURE__*/React.createElement(DialogContentText,null,goal.description,/*#__PURE__*/React.createElement(\"br\",null),\"Started: \",goal.startDate,/*#__PURE__*/React.createElement(\"br\",null),\"Days Left: \",goal.duration*7-getDayOn(),/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(\"div\",{style:{float:'right'}},showView===\"LINE\"?/*#__PURE__*/React.createElement(LineChart,{width:500,height:300,data:goalData,margin:{top:5,right:30,left:30,bottom:30},className:classes.form},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{dataKey:\"name\"},/*#__PURE__*/React.createElement(Label,{value:\"Days\",offset:0,position:\"bottom\"})),/*#__PURE__*/React.createElement(YAxis,{className:classes.yaxis,label:{value:goal.metric,angle:-90,position:'left'}}),/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Legend,{verticalAlign:\"top\",height:36}),/*#__PURE__*/React.createElement(Line,{name:creatorName,type:\"monotone\",dataKey:\"uv\",stroke:\"#8884d8\",activeDot:{r:8}}),/*#__PURE__*/React.createElement(Line,{name:inviteeName,type:\"monotone\",dataKey:\"pv\",stroke:\"#82ca9d\"}),/*#__PURE__*/React.createElement(ReferenceLine,{y:goal[\"minimum\"],label:\"Goal\",stroke:\"green\",strokeDasharray:\"5 5\"})):showView===\"BAR\"?/*#__PURE__*/React.createElement(BarChart,{width:500,height:300,data:goalData,margin:{top:5,right:30,left:30,bottom:30},className:classes.form},/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(XAxis,{dataKey:\"name\"},/*#__PURE__*/React.createElement(Label,{value:\"Days\",offset:0,position:\"bottom\"})),/*#__PURE__*/React.createElement(YAxis,{className:classes.yaxis,label:{value:goal.metric,angle:-90,position:'left'}}),/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Legend,{verticalAlign:\"top\",height:36}),/*#__PURE__*/React.createElement(Bar,{name:creatorName,dataKey:\"uv\",fill:\"#8884d8\"}),/*#__PURE__*/React.createElement(Bar,{name:inviteeName,dataKey:\"pv\",fill:\"#82ca9d\"}),/*#__PURE__*/React.createElement(ReferenceLine,{y:goal[\"minimum\"],label:\"Goal\",stroke:\"green\",strokeDasharray:\"5 5\"})):/*#__PURE__*/React.createElement(AreaChart,{width:500,height:300,data:goalData,margin:{top:5,right:30,left:30,bottom:30},className:classes.form},/*#__PURE__*/React.createElement(\"defs\",null,/*#__PURE__*/React.createElement(\"linearGradient\",{id:\"colorUv\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\"},/*#__PURE__*/React.createElement(\"stop\",{offset:\"5%\",stopColor:\"#8884d8\",stopOpacity:0.8}),/*#__PURE__*/React.createElement(\"stop\",{offset:\"95%\",stopColor:\"#8884d8\",stopOpacity:0})),/*#__PURE__*/React.createElement(\"linearGradient\",{id:\"colorPv\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\"},/*#__PURE__*/React.createElement(\"stop\",{offset:\"5%\",stopColor:\"#82ca9d\",stopOpacity:0.8}),/*#__PURE__*/React.createElement(\"stop\",{offset:\"95%\",stopColor:\"#82ca9d\",stopOpacity:0}))),/*#__PURE__*/React.createElement(XAxis,{dataKey:\"name\"},/*#__PURE__*/React.createElement(Label,{value:\"Days\",offset:0,position:\"bottom\"})),/*#__PURE__*/React.createElement(YAxis,{className:classes.yaxis,label:{value:goal.metric,angle:-90,position:'left'}}),/*#__PURE__*/React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/React.createElement(Tooltip,null),/*#__PURE__*/React.createElement(Legend,{verticalAlign:\"top\",height:36}),/*#__PURE__*/React.createElement(Area,{name:creatorName,type:\"monotone\",dataKey:\"uv\",stroke:\"#8884d8\",fillOpacity:1,fill:\"url(#colorUv)\"}),/*#__PURE__*/React.createElement(Area,{name:inviteeName,type:\"monotone\",dataKey:\"pv\",stroke:\"#82ca9d\",fillOpacity:1,fill:\"url(#colorPv)\"}),/*#__PURE__*/React.createElement(ReferenceLine,{y:goal[\"minimum\"],label:\"Goal\",stroke:\"green\",strokeDasharray:\"5 5\"}))))),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"Close\"))));}","map":{"version":3,"sources":["/Users/eddie/Documents/GitHub/quick-travis/src/Card/SeeMore.js"],"names":["React","useEffect","useState","makeStyles","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","ProgressGrid","firebase","AreaChart","Area","BarChart","Bar","LineChart","Label","ReferenceLine","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ToggleButtonsView","useStyles","theme","form","display","flexDirection","margin","width","align","yaxis","padding","textAlign","SeeMore","goal","buttonText","classes","open","setOpen","goalData","setGoalData","showView","setShowView","creatorName","setCreatorName","inviteeName","setInviteeName","getDayOn","startdate","Date","currentdate","deltatime","getTime","deltadays","Math","floor","handleClickOpen","handleClose","tempData","users","Object","keys","j","length","entry","name","toString","uv","pv","push","setGoalUserNames","snap","val","split","dbUsers","database","ref","on","error","alert","off","overflow","float","title","description","startDate","duration","top","right","left","bottom","value","metric","angle","position","r"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport ProgressGrid from \"./ProgressGrid\";\nimport firebase from \"../shared/firebase\";\n\nimport {\n  AreaChart, Area, BarChart, Bar, LineChart, Label, ReferenceLine, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\n} from 'recharts';\nimport ToggleButtonsView from './ToggleView';\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: 'auto',\n    width: 'fit-content',\n    align: 'right',\n  },\n  yaxis:{\n  \tpadding:'10px',\n  \ttextAlign: 'center'\n  },\n}));\n\nexport default function SeeMore({ goal, buttonText }) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const [goalData, setGoalData] = useState([]);\n  const [showView, setShowView] = React.useState('BAR');\n  const [creatorName, setCreatorName] = useState([]);\n  const [inviteeName, setInviteeName] = useState([]);\n\n  const getDayOn = () => {\n    var startdate = new Date(goal[\"startDate\"]);\n    var currentdate = new Date();\n    let deltatime = currentdate.getTime() - startdate.getTime();\n    let deltadays = Math.floor(deltatime / (1000 * 3600 * 24));\n    return deltadays;\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    let tempData = []; \n    let users = Object.keys(goal[\"progress\"]);\n    for(let j = 0; j < goal[\"progress\"][users[0]].length; j++){\n      let entry = {\n        name: j.toString(), \n        uv: goal[\"progress\"][goal[\"groupMembers\"][\"creator\"]][j],\n        pv: goal[\"progress\"][goal[\"groupMembers\"][\"invitee\"]][j],\n      }\n      tempData.push(entry); \n    }\n    setGoalData(tempData);\n  }, [goal]);\n\n  useEffect(() => {\n    const setGoalUserNames = (snap) => {\n      if (snap.val()) {\n        setCreatorName(\n          snap.val()[goal[\"groupMembers\"][\"creator\"]][\"name\"].split(\" \")[0]\n        );\n        setInviteeName(\n          snap.val()[goal[\"groupMembers\"][\"invitee\"]][\"name\"].split(\" \")[0]\n        );\n      }\n    };\n\n    const dbUsers = firebase.database().ref(\"users\");\n    dbUsers.on(\"value\", setGoalUserNames, (error) => alert(error));\n    return () => {\n      dbUsers.off(\"value\", setGoalUserNames);\n    };\n  });\n\n  return (\n    <React.Fragment>\n      <div>\n        <div>\n          <Button  \n            size=\"medium\" \n            variant=\"contained\" \n            color=\"primary\" \n            style={{width:\"150px\"}}\n            onClick={handleClickOpen}>\n            {buttonText ? buttonText : 'See More'}\n          </Button>\n        </div>\n        <div>\n        </div>\n      </div>\n\n      <Dialog\n        fullWidth={true}\n        maxWidth={\"md\"}\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"max-width-dialog-title\"\n        style={{overflow:\"scrollbar\"}}\n      >\n        <div>\n          <div style={{float:\"left\"}}>\n            <DialogTitle id=\"max-width-dialog-title\">{goal.title}</DialogTitle>\n          </div>\n          <div style={{float:\"right\", margin:\"10px\"}}>\n            <ToggleButtonsView showView={showView} setShowView={setShowView}/>\n          </div>\n        </div>\n        <DialogContent>\n          <div>\n            <div style={{float:'left'}}>\n              <DialogContentText>\n                {goal.description}\n                <br></br>\n                Started: {goal.startDate}\n                <br></br>\n                Days Left: {goal.duration * 7 - getDayOn()}\n                <br></br>\n              </DialogContentText>\n            </div>\n            <div style={{float: 'right'}}>\n              { (showView === \"LINE\") ?\n              <LineChart\n                width={500}\n                height={300}\n                data={goalData}\n                margin={{\n                  top: 5, right: 30, left: 30, bottom: 30,\n                }}\n                className={classes.form}\n              >\n                <CartesianGrid strokeDasharray=\"3 3\" />\n        \t\t    <XAxis dataKey=\"name\">\n        \t   \t\t  <Label value=\"Days\" offset={0} position=\"bottom\" />\n        \t  \t  </XAxis>  \t\t\t\n        \t  \t  <YAxis className={classes.yaxis} label={{ value: goal.metric, angle: -90, position: 'left'}} />\n                <Tooltip />\n        \t\t\t  <Legend verticalAlign=\"top\" height={36}/>\n                <Line name={creatorName} type=\"monotone\" dataKey=\"uv\" stroke=\"#8884d8\" activeDot={{ r: 8 }} />\n               \t<Line name={inviteeName} type=\"monotone\" dataKey=\"pv\" stroke=\"#82ca9d\" />\n               \t<ReferenceLine y={goal[\"minimum\"]} label=\"Goal\" stroke=\"green\" strokeDasharray='5 5'  />\n              </LineChart>\n              :\n              (showView === \"BAR\") ?\n              <BarChart \n                width={500} \n                height={300} \n                data={goalData}\n                margin={{\n                  top: 5, right: 30, left: 30, bottom: 30,\n                }}\n                className={classes.form}\n              >\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"name\">\n                  <Label value=\"Days\" offset={0} position=\"bottom\" />\n                </XAxis>\n                <YAxis className={classes.yaxis} label={{value: goal.metric, angle: -90, position: 'left'}}/>\n                <Tooltip />\n                <Legend verticalAlign=\"top\" height={36}/>\n                <Bar name={creatorName} dataKey=\"uv\" fill=\"#8884d8\" />\n                <Bar name={inviteeName} dataKey=\"pv\" fill=\"#82ca9d\" />\n                <ReferenceLine y={goal[\"minimum\"]} label=\"Goal\" stroke=\"green\" strokeDasharray='5 5'  />\n              </BarChart>\n              :\n              <AreaChart \n                width={500} \n                height={300} \n                data={goalData}\n                margin={{\n                  top: 5, right: 30, left: 30, bottom: 30,\n                }}\n                className={classes.form}\n              >\n                <defs>\n                  <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>\n                  </linearGradient>\n                  <linearGradient id=\"colorPv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#82ca9d\" stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor=\"#82ca9d\" stopOpacity={0}/>\n                  </linearGradient>\n                </defs>\n                <XAxis dataKey=\"name\">\n                  <Label value=\"Days\" offset={0} position=\"bottom\" />\n                </XAxis>\n                <YAxis className={classes.yaxis} label={{value: goal.metric, angle: -90, position: 'left'}}/>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <Tooltip />\n                <Legend verticalAlign=\"top\" height={36}/>\n                <Area name={creatorName} type=\"monotone\" dataKey=\"uv\" stroke=\"#8884d8\" fillOpacity={1} fill=\"url(#colorUv)\" />\n                <Area name={inviteeName} type=\"monotone\" dataKey=\"pv\" stroke=\"#82ca9d\" fillOpacity={1} fill=\"url(#colorPv)\" />\n                <ReferenceLine y={goal[\"minimum\"]} label=\"Goal\" stroke=\"green\" strokeDasharray='5 5'  />\n              </AreaChart>}\n            </div>\n          </div>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Close\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}