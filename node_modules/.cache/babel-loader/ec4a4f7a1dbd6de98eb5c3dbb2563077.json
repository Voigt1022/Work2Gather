{"ast":null,"code":"var _jsxFileName = \"/Users/eddie/Documents/GitHub/quick-travis/src/Card/Invite.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport firebase from \"../shared/firebase\";\nconst db = firebase.database().ref();\nconst useStyles = makeStyles({\n  root: {\n    width: \"280px\",\n    boxShadow: \"3px 3px 25px 2px rgba(0,0,0,0.5)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  }\n});\n\nconst Invite = ({\n  goal,\n  user\n}) => {\n  const [progress, setProgress] = useState(0);\n  const [creatorName, setCreatorName] = useState('');\n  const classes = useStyles();\n  useEffect(() => {\n    let users = Object.keys(goal[\"progress\"]);\n\n    for (let j = 0; j <= getDayOn(); j++) {\n      if (goal[\"progress\"][users[0]][j] == undefined) {\n        db.child(\"goals\").child(goal[\"key\"]).child(\"progress\").child(users[0]).child(j).set(0); //console.log(\"updating db for goal \" + goal.key + \" for user \" + users[0])\n      }\n\n      if (goal[\"progress\"][users[1]][j] == undefined) {\n        db.child(\"goals\").child(goal[\"key\"]).child(\"progress\").child(users[1]).child(j).set(0); //console.log(\"updating db for goal \" + goal.key + \" for user \" + users[1])\n      }\n    }\n  }, []);\n  useEffect(() => {\n    setProgress(getProgress);\n  }, [goal]);\n\n  const getDayOn = () => {\n    var startdate = new Date(goal[\"startDate\"]);\n    var currentdate = new Date();\n    let deltatime = currentdate.getTime() - startdate.getTime();\n    let deltadays = Math.floor(deltatime / (1000 * 3600 * 24));\n    return deltadays;\n  };\n\n  const getProgress = () => {\n    const onDayNum = getDayOn();\n    const checkedIn = goal[\"progress\"][user.uid][onDayNum];\n    return checkedIn;\n  };\n\n  const accept = () => {\n    db.child(\"goals\").child(goal[\"key\"]).child(\"confirmed\").set(true);\n    alert(\"accept!\");\n  };\n\n  const reject = () => {\n    //delete goals\n    db.child(\"goals\").child(goal[\"key\"]).child(\"confirmed\").set(true);\n    db.child(\"users\").child(goal[\"groupMembers\"][\"invitee\"]).child(\"invites\").child(goal[\"key\"]).set(null);\n    db.child(\"goals\").child(goal[\"key\"]).child(\"rejected\").set(true);\n    alert(\"reject!\");\n  };\n\n  useEffect(() => {\n    const setCreatorNameCallback = snap => {\n      if (snap.val()) {\n        setCreatorName(snap.val()[goal[\"groupMembers\"][\"creator\"]][\"name\"]);\n      }\n    };\n\n    const dbUsers = firebase.database().ref(\"users\");\n    dbUsers.on(\"value\", setCreatorNameCallback, error => alert(error));\n    return () => {\n      dbUsers.off(\"value\", setCreatorNameCallback);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"inline-block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, goal[\"title\"]), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.pos,\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }), \"Invite From: \", creatorName, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), \"Start Date: \", goal[\"startDate\"], /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }), \"Duration: \", goal[\"duration\"], \" Weeks\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }), \"Daily Goal: \", goal[\"minimum\"], \" \", goal[\"metric\"])), /*#__PURE__*/React.createElement(Container, {\n    style: {\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      display: \"inline-block\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      float: \"left\",\n      marginBottom: \"10px\"\n    },\n    onClick: accept,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Accept\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"contained\",\n    color: \"primary\",\n    style: {\n      float: \"right\",\n      marginBottom: \"10px\"\n    },\n    onClick: reject,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"Reject\"))));\n};\n\nexport default Invite;","map":{"version":3,"sources":["/Users/eddie/Documents/GitHub/quick-travis/src/Card/Invite.js"],"names":["React","useState","useEffect","makeStyles","Card","CardContent","Button","Typography","Container","firebase","db","database","ref","useStyles","root","width","boxShadow","title","fontSize","pos","marginBottom","Invite","goal","user","progress","setProgress","creatorName","setCreatorName","classes","users","Object","keys","j","getDayOn","undefined","child","set","getProgress","startdate","Date","currentdate","deltatime","getTime","deltadays","Math","floor","onDayNum","checkedIn","uid","accept","alert","reject","setCreatorNameCallback","snap","val","dbUsers","on","error","off","display","marginLeft","marginRight","float"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport firebase from \"../shared/firebase\";\n\nconst db = firebase.database().ref();\n\nconst useStyles = makeStyles({\n  root: {\n    width:\"280px\",\n    boxShadow: \"3px 3px 25px 2px rgba(0,0,0,0.5)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  }\n});\n\nconst Invite = ({ goal, user }) => {\n  const [progress, setProgress] = useState(0);\n  const [creatorName, setCreatorName] = useState('');\n\n  const classes = useStyles();\n  \n  useEffect(() => {\n    let users = Object.keys(goal[\"progress\"]);\n    for(let j = 0; j <= getDayOn(); j++){\n      if(goal[\"progress\"][users[0]][j] == undefined){\n        db.child(\"goals\")\n          .child(goal[\"key\"])\n          .child(\"progress\")\n          .child(users[0])\n          .child(j)\n          .set(0);\n          //console.log(\"updating db for goal \" + goal.key + \" for user \" + users[0])\n      }\n      if(goal[\"progress\"][users[1]][j] == undefined){\n        db.child(\"goals\")\n          .child(goal[\"key\"])\n          .child(\"progress\")\n          .child(users[1])\n          .child(j)\n          .set(0);\n          //console.log(\"updating db for goal \" + goal.key + \" for user \" + users[1])\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    setProgress(getProgress);\n  }, [goal]);\n\n  const getDayOn = () => {\n    var startdate = new Date(goal[\"startDate\"]);\n    var currentdate = new Date();\n    let deltatime = currentdate.getTime() - startdate.getTime();\n    let deltadays = Math.floor(deltatime / (1000 * 3600 * 24));\n    return deltadays;\n  };\n\n  const getProgress = () => {\n    const onDayNum = getDayOn();\n    const checkedIn = goal[\"progress\"][user.uid][onDayNum];\n    return checkedIn;\n  };\n\n  const accept = () => {\n    db.child(\"goals\").child(goal[\"key\"]).child(\"confirmed\").set(true);\n    alert(\"accept!\");\n  };\n\n  const reject = () => {\n    //delete goals\n    db.child(\"goals\").child(goal[\"key\"]).child(\"confirmed\").set(true);\n    db.child(\"users\").child(goal[\"groupMembers\"][\"invitee\"]).child(\"invites\").child(goal[\"key\"]).set(null);\n    db.child(\"goals\").child(goal[\"key\"]).child(\"rejected\").set(true);\n    alert(\"reject!\");\n  };\n\n  useEffect(() => {\n    const setCreatorNameCallback = (snap) => {\n      if (snap.val()) {\n        setCreatorName(\n          snap.val()[goal[\"groupMembers\"][\"creator\"]][\"name\"]\n        )\n      }\n    };\n    const dbUsers = firebase.database().ref(\"users\");\n    dbUsers.on(\"value\", setCreatorNameCallback, (error) => alert(error));\n    return () => {\n      dbUsers.off(\"value\", setCreatorNameCallback);\n    };\n  }, []);\n\n  return (\n    <Card className={classes.root}>\n      <CardContent>\n        <div style={{display: \"inline-block\" }}>\n          <Typography variant=\"h5\" component=\"h2\">\n            {goal[\"title\"]}\n          </Typography>\n          <Typography className={classes.pos} color=\"textSecondary\">\n            <br></br>\n            Invite From: {creatorName}\n            <br></br>\n            Start Date: {goal[\"startDate\"]}\n            <br></br>\n            Duration: {goal[\"duration\"]} Weeks\n            <br></br>\n            Daily Goal: {goal[\"minimum\"]} {goal[\"metric\"]}\n          </Typography>\n        </div>\n        <Container style={{ marginLeft: \"auto\", marginRight: \"auto\", display: \"inline-block\"}}>\n          <Button\n            size=\"small\"\n            variant=\"contained\"\n            color=\"primary\"\n            style={{float: \"left\", marginBottom: \"10px\" }}\n            onClick={accept}\n          >\n            Accept\n          </Button>\n          <Button\n            size=\"small\"\n            variant=\"contained\"\n            color=\"primary\"\n            style={{float: \"right\", marginBottom: \"10px\"}}\n            onClick={reject}\n          >\n            Reject\n          </Button>\n        </Container>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport default Invite;\n"]},"metadata":{},"sourceType":"module"}